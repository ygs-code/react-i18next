"use strict";(self.webpackChunkwebpack_cli_util=self.webpackChunkwebpack_cli_util||[]).push([["test3"],{"./node_modules/rc-util/es/Dom/addEventListener.js":(e,s,t)=>{t.d(s,{A:()=>a});var n=t("./node_modules/react-dom/index.js");function a(e,s,t,a){var i=n.unstable_batchedUpdates?function(e){n.unstable_batchedUpdates(t,e)}:t;return null!=e&&e.addEventListener&&e.addEventListener(s,i,a),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(s,i,a)}}}},"./src/components/VerificationCodeLogin/index.tsx":(e,s,t)=>{t.d(s,{A:()=>y});var n=t("./node_modules/react/jsx-runtime.js"),a=t("./src/utils/index.js"),i=t("./node_modules/antd/es/form/index.js"),l=t("./node_modules/antd/es/message/index.js"),r=t("./node_modules/antd/es/input/index.js"),o=t("./node_modules/antd/es/button/index.js"),d=t("./node_modules/antd/es/checkbox/index.js"),c=t("./node_modules/react/index.js"),u=t("./src/apis/index.ts"),m=t("./node_modules/antd/es/space/index.js"),h=t("./node_modules/antd/es/image/index.js"),x=t("./src/apis/request/token.ts");const j=({disabled:e})=>{const[s,t]=c.useState(""),[a,i]=c.useState(!1);function l(){return e=this,s=null,n=function*(){i(!0),yield(0,u.genAuthCaptcha)().then((e=>{t(btoa(e.data.svg)),x.A.set(e.data.token)})).catch((e=>{})).finally((()=>{i(!1)}))},new Promise(((t,a)=>{var i=e=>{try{r(n.next(e))}catch(e){a(e)}},l=e=>{try{r(n.throw(e))}catch(e){a(e)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,l);r((n=n.apply(e,s)).next())}));var e,s,n}return(0,c.useEffect)((()=>{l()}),[]),(0,n.jsxs)(m.A,{size:8,children:[(0,n.jsx)(o.Ay,{size:"large",disabled:e,onClick:l,loading:a,children:"刷新"}),s&&(0,n.jsx)(h.A,{width:120,src:`data:image/svg+xml;base64,${s}`,fallback:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0ZXh0IHg9IjEwIiB5PSI1MCIgZmlsbD0iI0FBQUFBQSIgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIj5Mb2FkaW5nPC90ZXh0Pjwvc3ZnPg=="})]})};var p=t("./src/router/index.js"),v=t("./src/redux/index.ts");const g="loginInfo";function f(e){localStorage.setItem(g,JSON.stringify(e))}const y=(0,v.lM)()((0,p.Xi)((e=>{const{type:s,size:t,placeholder:m,prefix:h,pushRoute:p,routePaths:v}=e,[y]=i.A.useForm(),[b,A]=(0,c.useState)(!1),[I,w]=(0,c.useState)(0),[_,k]=(0,c.useState)(!1);(0,c.useEffect)((()=>{const e=function(){const e=localStorage.getItem(g);return e?JSON.parse(e):null}();if(e){if(e.loginType!==s)return;y.setFieldsValue({emailOrPhone:e.userId,isRemember:!0})}}),[y]);return(0,n.jsxs)(i.A,{form:y,onFinish:e=>{k(!0),e.isRemember&&f({loginType:s,userId:e.emailOrPhone});try{(0,u.emailLogin)(e.emailCode).then((t=>{k(!1),l.Ay.success("登录成功"),f({loginType:s,userId:e.emailOrPhone}),x.A.set(t.data.authorization),p&&p({path:null==v?void 0:v.home,params:{}})})).catch((()=>{k(!1)}))}catch(e){k(!1)}},style:{width:"500px"},children:[(0,n.jsx)(i.A.Item,{name:"emailOrPhone",validateFirst:!0,rules:[{required:!0,message:(e=>{switch(e){case"email":return"请输入邮箱";case"phone":return"请输入手机号";default:return"请输入用户名或手机号或邮箱"}})(s)},{validator:(e,t)=>"phone"===s&&(0,a.Zk)(t)||"email"===s&&(0,a.Ro)(t)?Promise.resolve():Promise.reject("格式不正确请重新输入")}],children:(0,n.jsx)(r.A,{size:t,placeholder:m,prefix:h,allowClear:!0})}),(0,n.jsx)(i.A.Item,{name:"captcha",children:(0,n.jsxs)("div",{className:"flex-center",children:[(0,n.jsx)(r.A,{size:t,placeholder:"请输入图形验证码",allowClear:!0,style:{marginRight:"8px"}}),(0,n.jsx)(j,{})]})}),(0,n.jsx)(i.A.Item,{name:"emailCode",children:(0,n.jsxs)("div",{className:"flex-center",children:[(0,n.jsx)(r.A,{size:t,placeholder:"请输入邮箱验证码",allowClear:!0,style:{marginRight:"8px"}}),(0,n.jsx)(o.Ay,{size:t,onClick:()=>{return e=null,s=null,t=function*(){const e=y.getFieldValue("emailOrPhone"),s=y.getFieldValue("captcha");A(!0);const t={Login:e};yield(0,u.emailSendCode)(t,s).then((e=>{A(!1),l.Ay.success("验证码发送成功"),x.A.set(e.data),w(10);const s=setInterval((()=>{w((e=>(1===e&&clearInterval(s),e-1)))}),1e3)})).catch((()=>A(!1)))},new Promise(((n,a)=>{var i=e=>{try{r(t.next(e))}catch(e){a(e)}},l=e=>{try{r(t.throw(e))}catch(e){a(e)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,l);r((t=t.apply(e,s)).next())}));var e,s,t},loading:b,disabled:I>0,children:I>0?`${I}秒后重新获取`:"获取验证码"})]})}),(0,n.jsx)(i.A.Item,{name:"isRemember",valuePropName:"checked",initialValue:!1,children:(0,n.jsx)(d.A,{children:"记住账号"})}),(0,n.jsx)(i.A.Item,{children:(0,n.jsx)(o.Ay,{className:"login-button",type:"primary",htmlType:"submit",loading:_,children:"登录"})})]})})))},"./src/pages/Test3/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var n=t("./node_modules/react/jsx-runtime.js"),a=(t("./src/assets/css/base.scss"),t("./node_modules/antd/es/button/index.js")),i=t("./src/redux/index.ts"),l=t("./src/router/index.js"),r=t("./node_modules/react/index.js"),o=t("./src/components/VerificationCodeLogin/index.tsx"),d=t("./node_modules/@ant-design/icons/es/icons/MailTwoTone.js");t("./src/apis/index.ts"),t("./src/apis/request/token.ts");const c=(0,i.lM)()((0,l.Xi)((e=>{const{pushRoute:s,routePaths:t}=e;o.A,d.A,o.A;return(0,r.useEffect)((()=>{}),[]),(0,n.jsx)("div",{className:"log-in-container",children:(0,n.jsxs)("div",{className:"log-in-left",children:[(0,n.jsx)(a.Ay,{onClick:()=>{s(t.test1)},children:"跳转去test1"}),(0,n.jsx)(a.Ay,{onClick:()=>{(()=>{throw"测试错误"})()},children:"跳转去test2"})]})})})))}}]);
//# sourceMappingURL=test3_8b33bf844f7a0fbc76e8_chunk.js.map